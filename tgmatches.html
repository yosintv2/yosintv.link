<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TG Match Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    .container {
      max-width: 700px;
      background: #fff;
      border: 1px solid #dee2e6;
      border-radius: 0.5rem;
      padding: 1.5rem;
    }
    pre {
      background: #f8f9fa;
      padding: 1rem;
      border: 1px solid #dee2e6;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 0.95rem;
      line-height: 1.5;
      font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", sans-serif;
      white-space: pre-wrap;
    }
    .copy-message {
      color: #28a745;
      font-size: 0.9rem;
      margin-top: 0.5rem;
      opacity: 0;
      animation: fadeInOut 2s ease forwards;
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="text-center text-dark mb-4 h3">Team Matchup Generator</h1>
    <div class="mb-4">
      <label for="matchups" class="form-label fw-medium">Enter Matchups (e.g., Al Nassr vs Istiklol):</label>
      <textarea id="matchups" rows="8" class="form-control" placeholder="Al Nassr vs Istiklol\n0d 1h 51m\nAjax vs Inter Milan\n0d 2h 36m"></textarea>
    </div>
    <button onclick="generateTxt()" class="btn btn-primary w-100 w-sm-auto mb-4">Generate Matchup Text</button>
    <div id="output">
      <h3 class="text-dark mb-3 fw-medium">Generated Text (Double-click to copy):</h3>
      <div id="outputText"></div>
    </div>
  </div>
  <script>
    function generateTxt() {
      const input = document.getElementById('matchups').value.trim();
      const outputText = document.getElementById('outputText');
      outputText.innerHTML = '';

      if (!input) {
        outputText.innerHTML = '<p class="text-danger fw-medium">Please enter at least one matchup.</p>';
        return;
      }

      // Split by newlines and filter out empty lines
      const lines = input.split('\n').filter(line => line.trim() !== '');
      const uniqueMatches = new Set();
      let output = '';
      const regex = /(.+?)\s+vs\s+(.+)/i; // Case-insensitive, flexible spacing

      // Header
      output += `\u26A0\uFE0F Today's Matches | Live \u203C\uFE0F\n\n`;

      // Process every odd-numbered line (0-based index) as a matchup
      for (let i = 0; i < lines.length; i += 2) {
        const line = lines[i];
        const match = line.match(regex);
        if (!match || !match[1] || !match[2]) {
          output += `<p class="text-danger fw-medium">Invalid format in line ${i + 1}: ${line}</p>\n`;
          continue;
        }

        const team1 = match[1].trim();
        const team2 = match[2].trim();
        const matchKey = `${team1} vs ${team2}`;

        if (uniqueMatches.has(matchKey)) {
          continue; // Skip duplicates
        }
        uniqueMatches.add(matchKey);

        // Generate matchup text with emojis and links
        output += `\u26F3 ${team1} \uD83C\uDD9A ${team2}\n` +
                 `\uD83D\uDC49 https://www.yosin-tv.net/\n` +
                 `\uD83D\uDC49 https://www.yosintv.link/football.html\n\n`;
      }

      if (uniqueMatches.size === 0) {
        output = '<p class="text-danger fw-medium">No valid matchups found.</p>';
      } else {
        // Footer with highlights
        output += `\uD83D\uDCF1 Watch Football/Cricket HighlightsðŸ‘‡\n` +
                 `\uD83D\uDC49 https://www.cricfoot.net/`;
      }

      // Create pre element for output
      const preElement = document.createElement('pre');
      preElement.textContent = output;
      preElement.ondblclick = function() {
        navigator.clipboard.writeText(output).then(() => {
          const message = document.createElement('div');
          message.className = 'copy-message';
          message.textContent = 'Text copied to clipboard!';
          outputText.appendChild(message);
          setTimeout(() => message.remove(), 2000);
        }).catch(err => {
          console.error('Failed to copy: ', err);
        });
      };
      outputText.appendChild(preElement);
    }
  </script>
</body>
</html>
